<!-- jit master.xml of SERVERNAME by Sander Devrieze -->

<jabber>

  <!--
     You need to add elogger and rlogger entries here when using ejabberd.
     In this case the transport will do the logging.
  -->

  <log id='elogger'>
    <host/>
    <logtype/>
    <file>ERROR_LOG_DIRECTORY/jit</file> <!-- WPjabber logs with date -->
  </log>

  <log id='rlogger'>
    <host/>
    <logtype>record</logtype>
    <file>RECORD_LOG_DIRECTORY/jit</file> <!-- WPjabber logs with date -->
  </log>

  <!--
     Some Jabber server implementations do not provide
     XDB services (for example jabberd 2.0 and ejabberd).
     xdb_file-jit.so is loaded in to handle all XDB requests.
  -->

<!-- See also information in xdb_file/README of the JIT package! -->

  <xdb id="xdb">
    <host/>
    <load>
      <xdb_file>JABBER_LIBS_DIRECTORYxdb_file-jit.so</xdb_file> <!-- This is the renamed xdb_file.so of JIT. -->
      </load>
    <xdb_file xmlns="jabber:config:xdb_file">
     <spool><jabberd:cmdline flag='s'>JABBERD14-SPOOL-DIRECTORY</jabberd:cmdline></spool>
    </xdb_file>
  </xdb>

  <!--
     localhost is your jabber host.
     Replace "localhost" by the full host name of your server
     and have all host names here resolveable via DNS if you
     want the transport to be available to the public.
  -->

  <service id="icq.SERVERNAME">
    <!--
       Replace localhost with the same name as above to enable sms.
    -->
    <host>sms.icq.SERVERNAME</host>
    <!-- JIT configuration -->
    <icqtrans xmlns="jabber:config:icqtrans">
      <sms>
        <host>sms.icq.SERVERNAME</host>
        <!-- status of virtual "sms-contacts" -->
        <show>away</show>
        <status/>
      </sms>
      <instructions>Fill in your UIN and password.</instructions>
      <search>Search ICQ users.</search>
      <jabberd:include>./vCard.xml</jabberd:include>
      <!-- Hashtable for users -->
      <prime>3907</prime>
      <!-- Send messages from icq as chat to jabber clients -->
      <chat/>
      <!-- ICQ web presence -->
      <web/>
      <!--
         If you don't want jabber:x:data forms
         in reg and search uncomment this tag.
         Not recomended
      -->
      <no_xdata/>
      <!--
         Remove this tag to disable JIT's own contact list.
         This will break the transport if it can not request
         the user's roster via xdb get then (meaning the peer
         uses jabberd 2 or the peer uses a remote jabber
         server).
      -->
      <own_roster/>
      <!--
         When present, this tag will tell JIT not to try to
         get the user's roster (which will take a bit of time
         to fail in scenarios described above).
      -->
      <no_jabber_roster/>
      <!-- File with stats -->
      <user_count_file>/opt/ejabberd/var/log/jabber/count/jit</user_count_file>
      <!--
         Interval beetween checking sessions: ping, messages, acks 
      -->
      <session_check>5</session_check>
      <!-- Reconnect retries. -->
      <reconnects>5</reconnects>
      <!--
         Time in sec when session can be inactive, 0  - disabled 
      -->
      <session_timeout>18000</session_timeout>
      <charset>windows-1252</charset>
      <server>
        <host port="5190">login.icq.com</host>
      </server>
    </icqtrans>
    <!-- JIT module -->
    <load>
      <icqtrans>JABBER_LIBS_DIRECTORYjit.so</icqtrans>
    </load>
  </service>

  <!--
     The settings here have to match the setting you made
     in your main Jabber server's configuration file.
     Replace localhost with your main jabber server host name.
  -->

  <service id="icq.SERVERNAME-linker">
    <host>SERVERNAME</host>
    <uplink/>
    <connect>
      <ip>127.0.0.1</ip>
      <port>5234</port>
      <jabberd:include>./secret.xml</jabberd:include>
    </connect>
  </service>

  <pidfile>PID_FILE_DIRECTORY/jit.pid</pidfile>

</jabber>
