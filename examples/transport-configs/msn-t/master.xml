<!-- msn-t master.xml of SERVERNAME by Sander Devrieze -->

<jabber>

  <!--
     You need to add elogger and rlogger entries here when using ejabberd.
     In this case the transport will do the logging.
  -->

  <log id='elogger'>
    <host/>
    <logtype/>
    <format>%d: [%t] (%h): %s</format>
    <file>ERROR_LOG_DIRECTORY/msn-t.log</file>
  </log>

  <log id='rlogger'>
    <host/>
    <logtype>record</logtype>
    <format>%d %h %s</format>
    <file>RECORD_LOG_DIRECTORY/msn-t.log</file>
  </log>

  <!--
     Some Jabber server implementations do not provide
     XDB services (for example jabberd 2.0 and ejabberd).
     xdb_file.so is loaded in to handle all XDB requests.
  -->

  <xdb id="xdb">
    <host/>
    <load>
      <xdb_file>JABBER_LIBS_DIRECTORYxdb_file.so</xdb_file>
      </load>
    <xdb_file xmlns="jabber:config:xdb_file">
      <spool><jabberd:cmdline flag='s'>JABBERD14-SPOOL-DIRECTORY</jabberd:cmdline></spool>
    </xdb_file>
  </xdb>

  <!--
     localhost is your jabber host.
     Replace "localhost" by the full host name of your server
     and have all host names here resolveable via DNS if you
     want the transport to be available to the public.
  -->

  <service id="msn.SERVERNAME">
    <!-- msn-t configuration -->
    <msntrans xmlns="jabber:config:msntrans">
      <instructions>Fill in your MSN account and password (eg: user1@hotmail.com).  A nickname is optional.</instructions>
      <vCard>
        <FN>MSN Transport</FN>
        <DESC>This is the MSN Transport.</DESC>
        <EMAILADD_YOUR_EMAIL_ADDRESS_HERE/EMAIL>
        <URL>http://msn-transport.jabberstudio.org/</URL>
      </vCard>
      <!--
         Conference support allows you to create groupchat rooms on MSN
         transport and invite MSN users to join. 
      -->
      <conference id="conference.msn.SERVERNAME">
        <!--
           This will make MSN transport invite you to a special groupchat
           room when more then one user joins a normal one-on-one session.
           Joining this room will make MSN transport "switch" the session
           into groupchat mode.  If you ignore it, MSN transport will
           continue to send the messages as one-on-one chats. 
        -->
        <invite>More than one user entered this chat session. Enter this room to switch to groupchat modus.</invite>
        <notice>
          <join> is available</join>
          <leave> has leaved the room</leave>
        </notice>
      </conference>
      <!-- Enable Hotmail inbox notification -->
      <headlines/>
      <!--
         Enable fancy friendly names
         If the user enters a nickname upon registration, and the user has a status message,
         their MSN friendly name will be "nickname - status message"

         If the user does not enter a nickname on registration, but they do have a status message,
         their friendly name will just be their status message

         If the user did enter a nickname on registration, but they have a blank status message,
         then their friendly name will just be the registered nickname

         If the user did not enter a nickname on registration, and they have a blank status message,
         their nickname will just be the username portion of their JID

         If the above chosen friendly name is too long, then it will be truncated and "..." placed
         at the end. MSN only supports friendly names of 128 characters, so this is unavoidable.

         If this is disabled, then the registered nick is always sent as the MSN friendly name,
         or if that is blank, the username portion of their JID is sent instead
      -->
      <fancy_friendly/>
    </msntrans>
    <!-- msn-t module -->
    <load>
      <msntrans>JABBER_LIBS_DIRECTORYmsn-t.so</msntrans>
    </load>
  </service>

  <!--
     Here the jabberd 1.4.x that runs the MSN Transport
     module is instructed to uplink to the main Jabber
     server.
     The settings here have to match the setting you made
     in your main Jabber server's configuration file.
     Replace localhost with your main jabber server host name.
  -->

  <service id="msn.SERVERNAME-linker">
    <uplink/>
    <connect>
      <ip>127.0.0.1</ip>
      <port>5235</port>
      <secret>ADD_SECRET_HERE</secret>
    </connect>
  </service>

  <pidfile>PID_FILE_DIRECTORY/msn-t.pid</pidfile>

</jabber>
