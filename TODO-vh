check remove_user hook

check all usages of ejabberd_auth

+ src/ejabberd.hrl -- add MYHOSTS macro to return a list of virtual domains,
  MYNAME should return first defined host

? src/acl.erl -- "user", "user_regexp", "user_regexp" should match all virtual
  domains

+ src/cyrsasl_digest.erl -- need to use both "username" and "authzid", or better
  to use callback function

+ src/cyrsasl_plain.erl -- likewise

+ src/cyrsasl.erl -- likewise

+ src/ejabberd_auth.erl -- add "Server" argument to almost all exported
  functions

(workaround) src/ejabberd_auth_external.erl -- likewise

+ src/ejabberd_auth_internal.erl -- likewise

(workaround) src/ejabberd_auth_ldap.erl -- likewise

(workaround) src/ejabberd_auth_odbc.erl -- likewise

+ src/ejabberd_c2s.erl -- add validation of a server field

+ src/ejabberd_config.erl -- support for "hosts" option

src/ejabberd_ctl.erl -- add server argument to "register", "unregister", and
"registered-users" commands

+ src/ejabberd_local.erl -- register all virtual hosts in router

+ src/ejabberd_router.erl -- update dirty_get_all_routes/0

src/ejabberd_service.erl -- probably minor update in stream header

+ src/ejabberd_sm.erl -- update "session" and "presence" tables to contain
  server name in first two fields

- src/extauth.erl -- same as for src/ejabberd_auth_external.erl

src/jd2ejd.erl -- anyway need to be rewriten :)

+ src/mod_announce.erl -- update to ejabberd_auth changes, (-) probably update
  to send different server names in "from" attribute to users on different
  virtual hosts

+ src/mod_configure.erl -- update users part

+ src/mod_disco.erl -- likewise

+ src/mod_last.erl -- update db table to store server part of jid

src/mod_last_odbc.erl -- likewise

+ src/mod_offline.erl -- likewise

src/mod_offline_odbc.erl -- likewise

+ src/mod_privacy.erl -- likewise

+ src/mod_private.erl -- likewise

+ src/mod_register.erl -- need to check server field in sender jid and pass it
  to ejabberd_auth

(not tested) src/mod_roster.erl -- update db table to store server part of jid

src/mod_roster_odbc.erl -- update roster_in_subscription,
roster_out_subscription, roster_get_subscription_lists hooks

+ src/mod_vcard.erl -- update db table to store server part of jid

src/mod_vcard_ldap.erl -- update db table to store server part of jid

src/mod_pubsub/mod_pubsub.erl -- update defining of "ServedHosts" variable

+ src/web/ejabberd_web_admin.erl -- update user listing, roster editing, acl
  setting parts

+ src/web/ejabberd_web.erl -- update user authorization
